{
  "name": "Mail Agent to Pinecone",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        0,
        0
      ],
      "id": "712df160-9713-4358-a5b4-c1b1c57af1c4",
      "name": "When chat message received",
      "webhookId": "5f0e5260-abb0-4c44-8d4b-1f350300207b"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "=## üß† Role  \nYou are an *intelligent email agent* that automatically sends personalized, professional, and accurate emails to recipients.  \nYour task is to generate and send clear, well-structured emails based on the provided names, email addresses, and desired content.\n\n\n## ‚öôÔ∏è Rules & Behavior  \nYou have *2 tools* available and must use them correctly:\n\n1.‚Å† ‚Å†*Vectorstore_mails* ‚Äì Retrieve stored email addresses.  \n2.‚Å† ‚Å†*send_mail* ‚Äì Send the composed email.\n\n---\n\n## üì® Email Format  \n‚Ä¢‚Å†  ‚Å†The email *must include* a *subject line*.  \n‚Ä¢‚Å†  ‚Å†Begin with an appropriate *salutation* (e.g., ‚ÄúHello [Name]‚Äù or ‚ÄúDear [Name]‚Äù).  \n‚Ä¢‚Å†  ‚Å†The *main content* should be clear, concise, and friendly.  \n‚Ä¢‚Å†  ‚Å†End with a *suitable closing phrase* (e.g., ‚ÄúBest regards, Annie‚Äù).  \n\n---\n\n## üéØ Dynamic Personalization  \n‚Ä¢‚Å†  ‚Å†Replace *[Name]* with the recipient‚Äôs actual name automatically.  \n‚Ä¢‚Å†  ‚Å†If the name is missing, use a neutral greeting such as *‚ÄúHello, dear team.‚Äù*\n\n---\n\n## üîç Review & Optimization  \n‚Ä¢‚Å†  ‚Å†Avoid unnecessary *repetition* or *vague language*.  \n‚Ä¢‚Å†  ‚Å†If the message is *too long or unstructured, **summarize* it clearly before sending.  \n\n---\n\n## ‚úâÔ∏è Email Types (Adaptable Based on Context)  \n‚Ä¢‚Å†  ‚Å†Standard information email  \n‚Ä¢‚Å†  ‚Å†Reminder or follow-up email  \n‚Ä¢‚Å†  ‚Å†Offer or marketing email\n‚Ä¢‚Å†  ‚Å†Support or customer service request\n\n---\n\n## Example of a generated email\n\n**Subject:** Important information for you, [Name]\n\n**Text:**\nHello [Name],\n\nI hope you are doing well. I wanted to quickly inform you about [Topic]. If you have any questions or need further information, feel free to reach out.\n\nBest regards,\nShub"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        208,
        0
      ],
      "id": "8882434c-b11e-4bf0-95a5-714f52057b30",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "gpt-4o"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        80,
        208
      ],
      "id": "25bccfb1-dd00-4fd1-86ec-3cfe698fe2ac",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "83RzRe6NY43Wxy9N",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "use this to tool to get email information, you find all relevant email address",
        "pineconeIndex": {
          "__rl": true,
          "value": "emailn8n",
          "mode": "list",
          "cachedResultName": "emailn8n"
        },
        "options": {
          "pineconeNamespace": "n8nemails"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        256,
        256
      ],
      "id": "b23ab4c3-e101-40ea-a0dd-18cc05dcbec8",
      "name": "Pinecone Vector Store",
      "credentials": {
        "pineconeApi": {
          "id": "IybHILai9BbHzUg3",
          "name": "PineconeApi account 2"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        176,
        416
      ],
      "id": "03ad52f8-c4e1-4e08-911b-8162ad410140",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "83RzRe6NY43Wxy9N",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "description": "Use this tool to send out mails",
        "workflowId": {
          "__rl": true,
          "value": "Sq7cbYscCoXdKWcI",
          "mode": "list",
          "cachedResultUrl": "/workflow/Sq7cbYscCoXdKWcI",
          "cachedResultName": "Send Emails"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        688,
        176
      ],
      "id": "687dac99-964e-4052-a456-fb918d9e9830",
      "name": "send_mails"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Pinecone Vector Store": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "send_mails": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "6ec21c6c-e620-49b6-ae30-3dc4b5498f55",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "aac7c583aea0f661a99ba19b7318acfaa62d133fa76db59f991e7cbb07e10094"
  },
  "id": "Q5dFvNfHDM7odWH1",
  "tags": []
}